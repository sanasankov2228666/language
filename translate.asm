JUMP :main

:main
PUSH 0
POPREG AX
PUSH 5
CALL :factorial
POPM [AX]

PUSH 0
POPREG DX
PUSHM [DX]
OUT
JUMP :end_program
:factorial
PUSH 1
POPREG AX
POPM [AX]
PUSH 1
POPREG DX
PUSHM [DX]
PUSH 5
PUSH 0
POPREG CX
JA :false1
PUSH 1
POPREG CX
:false1
PUSHREG CX

PUSH 0
JE :endif1
PUSH 1
RET
:endif1

PUSH 1
POPREG DX
PUSHM [DX]
PUSH 1
POPREG DX
PUSHM [DX]
PUSH 1
SUB
CALL :factorial
MULT
RET
:end_program

HLT
